<!DOCTYPE html>
<html lang="jp">
<head>
	<meta charset="UTF-8">

	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-G3VRHWGPB7"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-G3VRHWGPB7');
	</script>

	<title>大銀行(仮)</title>
	<style>
		@font-face {
			font-family: "originalFont";
			src: url(/0_data/fonts/MPLUS1p-Medium.ttf) format("truetype");
		}

		* {
			text-align: center;
			font-family: "originalFont", sans-serif;
		}

		#title>span {font-size: 0.75em;}

		body {background-color: #eff;}
	</style>
</head>
<body>
	<h1 id="title">大銀行<span>(仮)</span></h1>
	<p>version test-α</p>

	<div id="testBts">
		name="<input id="testName">", password="<input id="testPassword">"
		<button onclick="addData('test',{name:el('testName').value, password:el('testPassword').value})">データ追加</button>
		<button onclick="getData()">データ取得</button>
	</div>
	<script type="module">
		// Import the functions you need from the SDKs you need
		import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
		import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
		// TODO: Add SDKs for Firebase products that you want to use
		// https://firebase.google.com/docs/web/setup#available-libraries

		// Your web app's Firebase configuration
		// For Firebase JS SDK v7.20.0 and later, measurementId is optional
		const firebaseConfig = {
			apiKey: "AIzaSyAjavOCdQ3RN8atXMLjhLK7TfKY3KSRjig",
			authDomain: "dai-bank.firebaseapp.com",
			projectId: "dai-bank",
			storageBucket: "dai-bank.firebasestorage.app",
			messagingSenderId: "257888747834",
			appId: "1:257888747834:web:e0df926bcf298623325003",
			measurementId: "G-SWPVQD3XT7"
		};

		// Initialize Firebase
		const app = initializeApp(firebaseConfig);
		const analytics = getAnalytics(app);

		import { getFirestore } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";
		const db = getFirestore(app);

		import { collection, addDoc } from "https://www.gstatic.com/firebasejs/11.0.2/firebase-firestore.js";

		function addData(collectionName, data) {
			try {
			addDoc(collection(db, collectionName), data);
			}catch(error) {alert(`${error.name}\n${error.stack}`)}
		};

		const querySnapshot = await getDocs(collection(db, "users"));;
		function getData() {
			try {
			querySnapshot.forEach((doc) => {
				alert(`${doc.id} => ${JSON.stringify(doc.data())}`);
			});
			}catch(error) {alert(`${error.name}\n${error.stack}`)}
		};
	</script>
	<script>
		function el(id) {return document.getElementById(id);}
	</script>
</body>
</html>